(this["webpackJsonpminer-watch"]=this["webpackJsonpminer-watch"]||[]).push([[0],{30:function(e,t,n){},32:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n(0),c=n.n(a),i=n(11),s=n.n(i),o=(n(30),n(24)),u=n(21),j=n(19),l=n(6),d=n(9),b=n.n(d),h=n(15),x=(n(32),n(42)),f=n(39),p=n(43),O=n(40),v=n(41),m=n(12),g=function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("granted"!==Notification.permission){e.next=4;break}new Notification(t),e.next=9;break;case 4:if("denied"===Notification.permission){e.next=9;break}return e.next=7,Notification.requestPermission();case 7:"granted"===e.sent&&new Notification(t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var k=function(e){var t=e.miner,n=e.updateMiner,a=(t.address,t.alertHashRate,t.isPolling),c=t.isError,i=t.averageHashRate;return Object(r.jsx)(x.a.Group,{children:Object(r.jsxs)(f.a,{children:[Object(r.jsx)(f.a.Prepend,{children:Object(r.jsx)(f.a.Text,{children:a?c?Object(r.jsx)(m.e,{}):Object(r.jsx)(m.c,{}):Object(r.jsx)(m.d,{})})}),Object(r.jsx)(p.a,{onClick:function(){n(Object(l.a)(Object(l.a)({},t),{},{isPolling:!a}))},children:a?Object(r.jsx)(m.a,{}):Object(r.jsx)(m.b,{})}),Object(r.jsx)(f.a.Append,{children:Object(r.jsxs)(f.a.Text,{children:[i," Mh/s"]})})]})})},w=function(e){var t=e.miner,n=e.updateMiner,a=e.removeMiner,c=t.name,i=t.address,s=t.alertHashRate;return Object(r.jsx)("div",{style:{padding:"10px",margin:"6px",backgroundColor:"#EEEEEE"},children:Object(r.jsxs)(x.a,{children:[Object(r.jsx)(x.a.Group,{children:Object(r.jsx)(p.a,{size:"sm",variant:"danger",onClick:function(){return a()},children:"Remove"})}),Object(r.jsx)(x.a.Group,{children:Object(r.jsx)(x.a.Control,{type:"text",placeholder:"Nickname",value:c,onChange:function(e){return n(Object(l.a)(Object(l.a)({},t),{},{name:e.target.value}))}})}),Object(r.jsx)(x.a.Group,{children:Object(r.jsx)(x.a.Control,{type:"text",placeholder:"Address",value:i,onChange:function(e){n(Object(l.a)(Object(l.a)({},t),{},{address:e.target.value}))}})}),Object(r.jsx)(x.a.Group,{children:Object(r.jsxs)(f.a,{children:[Object(r.jsx)(x.a.Control,{type:"number",placeholder:"Minimum hash rate",value:s,onChange:function(e){return n(Object(l.a)(Object(l.a)({},t),{},{alertHashRate:e.target.value}))}}),Object(r.jsx)(f.a.Append,{children:Object(r.jsx)(f.a.Text,{id:"basic-addon2",children:"Mh/s"})})]})}),Object(r.jsx)(k,{miner:t,updateMiner:n})]})})},M=function(e){var t=e.miners,n=e.setMiners,a=t.map((function(e,a){return Object(r.jsx)(w,{miner:e,updateMiner:function(e){var r=Object(j.a)(t);r[a]=e,n(r)},removeMiner:function(){var e=Object(j.a)(t);e.splice(a,1),n(e)}},a)}));return function(e,t){var n=c.a.useRef(null),r=c.a.useRef(e);c.a.useEffect((function(){r.current=e})),c.a.useEffect((function(){if("number"===typeof t)return n.current=window.setInterval((function(){return r.current()}),t),function(){return window.clearInterval(n.current)}}),[t]),n.current}(Object(h.a)(b.a.mark((function e(){var r,a,c,i,s,o,j,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){var t=e.address,n=e.averageHashRate;return e.isPolling?fetch("https://api.nanopool.org/v1/eth/avghashratelimited/".concat(t,"/1")).then((function(e){return e.json()})):Promise.resolve({data:n})})));case 2:r=e.sent,a=Object(u.a)(t),e.prev=4,a.s();case 6:if((c=a.n()).done){e.next=19;break}if(i=c.value,s=i.isError,o=i.name,j=i.averageHashRate,d=i.alertHashRate,!(j>-1&&j<d)){e.next=16;break}if(s){e.next=14;break}return i.isError=!0,e.next=14,g("Miner '".concat(o," is having trouble!"));case 14:e.next=17;break;case 16:i.isError=!1;case 17:e.next=6;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(4),a.e(e.t0);case 24:return e.prev=24,a.f(),e.finish(24);case 27:n(t.map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{averageHashRate:r[t].data})})));case 28:case"end":return e.stop()}}),e,null,[[4,21,24,27]])}))),1e4),Object(r.jsx)(O.a,{children:a})};var E=function(){var e=localStorage.getItem("miners")||"[]",t=Object(a.useState)(JSON.parse(e)),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(r.jsx)("div",{style:{paddingTop:"20px"},children:Object(r.jsxs)(O.a,{children:[Object(r.jsxs)(v.a,{children:[Object(r.jsx)(v.a.Brand,{children:"Nanopool Watcher"}),Object(r.jsx)(p.a,{onClick:Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(c.concat({name:"New Miner",address:"",alertHashRate:350,isPolling:!1,isError:!1,averageHashRate:-1})),e.next=3,Notification.requestPermission();case 3:case"end":return e.stop()}}),e)}))),children:"Add Miner"})]}),Object(r.jsx)(M,{miners:c,setMiners:function(e){localStorage.setItem("miners",JSON.stringify(e)),i(e)}})]})})};s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(E,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.7f3b6604.chunk.js.map